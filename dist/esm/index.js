var c=(e,t,r)=>new Promise((n,o)=>{var d=a=>{try{i(r.next(a))}catch(s){o(s)}},l=a=>{try{i(r.throw(a))}catch(s){o(s)}},i=a=>a.done?n(a.value):Promise.resolve(a.value).then(d,l);i((r=r.apply(e,t)).next())});function b(e){let t=document.createElement("iframe");t.sandbox.add("allow-same-origin"),t.sandbox.add("allow-scripts"),t.src=`${e.baseUrl}/boards/${encodeURIComponent(e.boardId)}`;let r={updateUserToken:n=>{var o;(o=t.contentWindow)==null||o.postMessage({type:"updateUserToken",userToken:n},"*")},dispose:()=>{t&&e.container.removeChild(t)}};return e.container.appendChild(t),new Promise((n,o)=>{function d(){m(e.container,t),t.removeEventListener("load",d),n(r)}t.addEventListener("load",d)})}var y=class{render(t){return c(this,null,function*(){return b(t)})}};function m(e,t){function r(n){var o;(o=t.contentWindow)==null||o.postMessage(p(n),"*")}document.addEventListener("keydown",r),document.addEventListener("keyup",r),window.addEventListener("message",n=>{var o;if(n.source===t.contentWindow&&((o=n.data)==null?void 0:o.type)==="keyboardEvent"){let d=new KeyboardEvent(n.data.eventType,n.data.eventData);e.dispatchEvent(d)}})}function p(e){return{type:"keyboardEvent",eventType:e.type,eventData:{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat}}}export{y as WhiteboardLoader,b as createWhiteboard};
//# sourceMappingURL=index.js.map
