"use strict";var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var v=(e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})},k=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of u(t))!E.call(e,n)&&n!==r&&c(e,n,{get:()=>t[n],enumerable:!(o=p(t,n))||o.enumerable});return e};var f=e=>k(c({},"__esModule",{value:!0}),e);var l=(e,t,r)=>new Promise((o,n)=>{var d=a=>{try{i(r.next(a))}catch(s){n(s)}},m=a=>{try{i(r.throw(a))}catch(s){n(s)}},i=a=>a.done?o(a.value):Promise.resolve(a.value).then(d,m);i((r=r.apply(e,t)).next())});var T={};v(T,{WhiteboardLoader:()=>y,createWhiteboard:()=>b});module.exports=f(T);function b(e){let t=document.createElement("iframe");t.sandbox.add("allow-same-origin"),t.sandbox.add("allow-scripts"),t.src=`${e.baseUrl}/boards/${encodeURIComponent(e.boardId)}`;let r={updateUserToken:o=>{var n;(n=t.contentWindow)==null||n.postMessage({type:"updateUserToken",userToken:o},"*")},dispose:()=>{t&&e.container.removeChild(t)}};return e.container.appendChild(t),new Promise((o,n)=>{function d(){h(e.container,t),t.removeEventListener("load",d),o(r)}t.addEventListener("load",d)})}var y=class{render(t){return l(this,null,function*(){return b(t)})}};function h(e,t){function r(o){var n;(n=t.contentWindow)==null||n.postMessage(K(o),"*")}document.addEventListener("keydown",r),document.addEventListener("keyup",r),window.addEventListener("message",o=>{var n;if(o.source===t.contentWindow&&((n=o.data)==null?void 0:n.type)==="keyboardEvent"){let d=new KeyboardEvent(o.data.eventType,o.data.eventData);e.dispatchEvent(d)}})}function K(e){return{type:"keyboardEvent",eventType:e.type,eventData:{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat}}}
//# sourceMappingURL=index.js.map
